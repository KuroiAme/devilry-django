{% extends "django_cradmin/base.django.html" %}
{% load static %}
{% load i18n %}
{% load humanize %}
{% load cradmin_tags %}

{% block title %}
    {{ assignment.get_path }}
{% endblock title %}

{% block pageheader-inner %}
    <h1>
        {% trans "Statistics" context "devilry_admin assignment statistics" %}
    </h1>
{% endblock pageheader-inner %}

{% block jsimports %}
    <script src="{% static 'devilry_statistics/3.4.1/devilry_statistics_all.js' %}"></script>
{% endblock %}

{% block content %}
    {% if not examiners_with_published_feedbackset_exist %}
        <div class="container devilry-dashboard-container">
            <p>
                {% trans "No data available. This may be because" %}:
            </p>
            -&nbsp;<strong>{% trans "There are no examiners assigned to any groups." %}</strong>
            <br>
            -&nbsp;<strong>{% trans "No feedbacks have been given yet." %}</strong>
        </div>
    {% else %}
        <div class="container devilry-dashboard-container">
            <h2 class="h3">
                {% trans "Points (average)" %}
            </h2>
            <br>
            <p class="text-muted">
                {% blocktrans trimmed %}
                    Average points given by each examiner registered on the assignment. The points are calculated by the
                    last published feedback, this means that points awared from previous attemps are not used.
                {% endblocktrans %}
            </p>
            <div data-ievv-jsbase-widget="examiner-average-grading-points"
                 data-ievv-jsbase-widget-config='{{ examiner_average_point_chart_config|safe }}'></div>
        </div>

        <div class="container devilry-dashboard-container">
            <h2 class="h3">
                {% trans "Result/Progress" %}
            </h2>
            <br>
            <p class="text-muted">
                {% blocktrans trimmed %}
                    The feedback progress in percentages. How many deliveries has the examiner passed, failed and not yet
                    corrected.
                {% endblocktrans %}
            </p>
            <div data-ievv-jsbase-widget="examiner-group-results"
                 data-ievv-jsbase-widget-config='{{ examiner_percentage_graded_chart_config|safe }}'></div>
        </div>

        <div class="container devilry-dashboard-container">
            <h2 class="h3">
                {% trans "Details" %}
            </h2>
            <br>
            <p class="text-muted">
                {% blocktrans trimmed %}
                    Detailed statistics per examiner.
                {% endblocktrans %}
            </p>
            <br><br>

            {# Explaining the different sections #}
            <p>
                {% blocktrans trimmed %}
                    What does the different sections for each examiner mean?
                {% endblocktrans %}
            </p>
            <strong>{% trans "Corrected groups" %}:</strong><br>
            {% blocktrans trimmed %}
                The number of groups the examiner has corrected.
            {% endblocktrans %}
            <br><br>
            <strong>{% trans "Groups with passing grade" %}:</strong><br>
            {% blocktrans trimmed %}
                The number of groups that where given a passing grade.
            {% endblocktrans %}
            <br><br>
            <strong>{% trans "Groups with failing grade" %}:</strong><br>
            {% blocktrans trimmed %}
                The number of groups that where given a failing grade.
            {% endblocktrans %}
            <br><br>
            <strong>{% trans "Groups waiting for feedback" %}:</strong><br>
            {% blocktrans trimmed %}
                The number of groups waiting for feedback. A group is waiting for feedback if the feedback is
                not published, and the deadline has expired.
            {% endblocktrans %}
            <br><br>
            <strong>{% trans "Groups where the deadline has not expired yet" %}:</strong><br>
            {% blocktrans trimmed %}
                The number of groups that has a deadline that has not expired yet, regardless of whether they have
                been corrected or not.
            {% endblocktrans %}
            <br><br>
            <strong>{% trans "Points" %}:</strong><br>
            {% blocktrans trimmed %}
                The average, highest and lowest grading points given by the examiner.
            {% endblocktrans %}
            <br><br>
            <div data-ievv-jsbase-widget="examiner-details"
                 data-ievv-jsbase-widget-config='{{ examiner_detail_config|safe }}'></div>
        </div>
    {% endif %}
{% endblock content %}
